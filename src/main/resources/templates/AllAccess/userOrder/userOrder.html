<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Mes commandes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-dark text-light">

<!-- En-t√™te -->
<div th:replace="~{fragments/header :: siteHeader}"></div>

<!-- Section principale -->
<section class="d-flex justify-content-center align-items-center"
         style="min-height: 100vh; background-image: url('/img/olympe.jpg'); background-size: cover; background-position: center;">
    <div class="container bg-dark bg-opacity-75 p-5 rounded-4 shadow-lg" style="max-width: 1100px;">

        <h1 class="text-center mb-4 fw-bold">üì¶ Mes commandes</h1>

        <div th:if="${#lists.isEmpty(orders)}" class="alert alert-info text-center">
            Vous n'avez pas encore pass√© de commande.
        </div>

        <div th:if="${!#lists.isEmpty(orders)}" class="table-responsive">
            <table class="table table-dark table-striped table-hover align-middle rounded-3 overflow-hidden">
                <thead class="table-light text-dark">
                <tr>
                    <th>ID Commande</th>
                    <th>Date de commande</th>
                    <th>Statut paiement</th>
                    <th>Sessions r√©serv√©es</th>
                    <th>Tickets</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="order : ${orders}">
                    <td th:text="${order.id}">1</td>
                    <td th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy HH:mm')}">01/01/2025 14:00</td>
                    <td th:text="${order.payment != null ? order.payment.status : 'Non pay√©'}">Pay√©</td>
                    <td>
                        <ul class="mb-0 ps-3">
                            <li th:each="item : ${order.items}">
                                <span th:text="${#temporals.format(item.session.startTime, 'dd/MM/yyyy HH:mm')}">20/07/2025 10:00</span> -
                                <span th:text="${item.session.name}">Finale 100m</span> (x<span th:text="${item.quantity}">2</span>)
                            </li>
                        </ul>
                    </td>
                    <td>
                        <ul class="mb-0 ps-3">
                            <li th:each="item : ${order.items}">
                                <ul class="mb-0 ps-3">
                                    <li th:each="ticket : ${item.tickets}">
                                        Ticket #<span th:text="${ticket.id}">123</span> -
                                        <a th:href="@{/all/tickets/ticket/{id}(id=${ticket.id})}" target="_blank" class="link-warning">Voir ticket</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
</section>

<!-- Footer -->
<footer id="contact" class="bg-dark text-center text-light py-4 mt-5">
    <p class="mb-0">
        2025 Jeux Olympiques Paris | Contactez-nous :
        <a href="mailto:contact@paris2025.com" class="text-light text-decoration-underline">contact@paris2025.com</a>
    </p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>